> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [docs.apiyi.com](https://docs.apiyi.com/api-capabilities/nano-banana-image-edit)

> ä½¿ç”¨ Gemini 2.5 Flash Image è¿›è¡Œå›¾ç‰‡ç¼–è¾‘ã€åˆæˆå’Œä¿®æ”¹ã€‚æ”¯æŒå¤šå›¾ç‰‡è¾“å…¥ã€æ–‡æœ¬æŒ‡ä»¤ç¼–è¾‘ã€è‡ªå®šä¹‰åˆ†è¾¨ç‡ï¼Œ10 ç§’å¿«é€Ÿç”Ÿæˆã€‚

æ¦‚è¿°
--

**Nano Banana å›¾ç‰‡ç¼–è¾‘**åŸºäºè°·æ­Œ Gemini å›¾åƒç”Ÿæˆæ¨¡å‹ç³»åˆ—ï¼Œç›®å‰æœ‰ä»¥ä¸‹ç‰ˆæœ¬å¯ç”¨ï¼š

### æœ€æ–°ç‰ˆæœ¬ï¼ˆæ¨èï¼‰

*   **Nano Banana Pro**ï¼š`gemini-3-pro-image-preview`ï¼ˆğŸ”¥ 2025 å¹´ 11 æœˆ 20 æ—¥ä¸Šçº¿ï¼‰
    *   åŸºäº Gemini 3 Proï¼Œæ¨ç†èƒ½åŠ›æ›´å¼º
    *   æ”¯æŒ 4K é«˜æ¸…å›¾åƒç¼–è¾‘ï¼ˆ1Kã€2Kã€4Kï¼‰
    *   é«˜çº§å±€éƒ¨ç¼–è¾‘ï¼šæ‘„åƒæœºè§’åº¦ã€ç„¦ç‚¹ã€è‰²å½©åˆ†çº§ã€åœºæ™¯ç…§æ˜
    *   ä¸šç•Œæœ€ä½³æ–‡æœ¬æ¸²æŸ“èƒ½åŠ›

### å‰ä»£ç‰ˆæœ¬

*   **æ­£å¼ç‰ˆ**ï¼š`gemini-2.5-flash-image`ï¼ˆç¨³å®šç‰ˆï¼Œæ”¯æŒ 10 ç§å®½é«˜æ¯”ï¼‰
*   **é¢„è§ˆç‰ˆ**ï¼š`gemini-2.5-flash-image-preview`ï¼ˆâš ï¸ å·²äº 2025 å¹´ 10 æœˆ 30 æ—¥ä¸‹çº¿ï¼‰

[

ğŸ“š æœ€æ–°æ–‡æ¡£
-------

**é£ä¹¦å®Œæ•´ä½¿ç”¨æŒ‡å—** - æ›´æ–°æœ€å¿«ï¼Œæ”¯æŒè¯„è®ºäº’åŠ¨è®¿é—®é£ä¹¦æ–‡æ¡£è·å–æœ€æ–°çš„ä½¿ç”¨æ•™ç¨‹ã€æŠ€å·§åˆ†äº«å’Œé—®é¢˜è§£ç­”ã€‚æ–‡æ¡£æŒç»­æ›´æ–°ï¼Œé‡åˆ°é—®é¢˜å¯ç›´æ¥åœ¨é£ä¹¦ä¸Šè¯„è®ºäº¤æµã€‚

](https://xinqikeji.feishu.cn/wiki/W4vEwdiCPi3VfTkrL5hcVlDxnQf)

è°ƒç”¨æ–¹å¼å¯¹æ¯”
------

API æ˜“ æ”¯æŒä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼š

### ç«¯ç‚¹å¯¹æ¯”è¡¨

<table><thead><tr><th>ç‰¹æ€§</th><th>è°·æ­ŒåŸç”Ÿæ ¼å¼</th><th>OpenAI å…¼å®¹æ¨¡å¼</th></tr></thead><tbody><tr><td><strong>ç«¯ç‚¹ URL</strong></td><td><code>/v1beta/models/gemini-2.5-flash-image:generateContent</code></td><td><code>/v1/chat/completions</code></td></tr><tr><td><strong>å›¾ç‰‡ç”Ÿæˆå°ºå¯¸</strong></td><td>æ”¯æŒ 10 ç§å®½é«˜æ¯”è‡ªå®šä¹‰</td><td>é»˜è®¤ 1:1</td></tr><tr><td><strong>å›¾ç‰‡ç¼–è¾‘å°ºå¯¸</strong></td><td>æ”¯æŒå®½é«˜æ¯”è‡ªå®šä¹‰</td><td>æ™ºèƒ½éµå¾ªåŸå›¾æ¯”ä¾‹</td></tr><tr><td><strong>è°ƒç”¨æ ¼å¼</strong></td><td>è°·æ­Œå®˜æ–¹æ ¼å¼</td><td>OpenAI æ ¼å¼</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>éœ€è¦ç²¾ç¡®æ§åˆ¶è¾“å‡ºå°ºå¯¸</td><td>å¿«é€Ÿé›†æˆï¼Œå…¼å®¹ç°æœ‰ä»£ç </td></tr></tbody></table>

ç¼–è¾‘èƒ½åŠ›
----

### Nano Banana Pro ä¸“å±é«˜çº§ç¼–è¾‘

*   **ğŸ“ å±€éƒ¨ç²¾ç»†ç¼–è¾‘**ï¼š
    *   è°ƒæ•´æ‘„åƒæœºè§’åº¦ï¼ˆCamera Anglesï¼‰
    *   æ”¹å˜ç„¦ç‚¹å’Œæ™¯æ·±
    *   åº”ç”¨ä¸“ä¸šçº§è‰²å½©åˆ†çº§ï¼ˆColor Gradingï¼‰
*   **ğŸŒ“ åœºæ™¯ç…§æ˜æ§åˆ¶**ï¼š
    *   æ—¥å¤œè½¬æ¢æ•ˆæœ
    *   èƒŒæ™¯è™šåŒ–ï¼ˆBokeh Effectï¼‰
    *   è‡ªå®šä¹‰å…‰ç…§å’Œé˜´å½±
*   **ğŸ¯ 4K é«˜æ¸…å¤„ç†**ï¼š
    *   æœ€é«˜ 4K åˆ†è¾¨ç‡ç¼–è¾‘
    *   ä¿æŒé«˜æ¸…æ™°åº¦ç»†èŠ‚
    *   ä¸“ä¸šçº§è¾“å‡ºè´¨é‡

### é€šç”¨ç¼–è¾‘èƒ½åŠ›

*   **å›¾ç‰‡åˆæˆ**ï¼šå°†å¤šå¼ å›¾ç‰‡æ— ç¼èåˆæˆä¸€å¼ 
*   **å…ƒç´ æ·»åŠ **ï¼šåœ¨å›¾ç‰‡ä¸­æ·»åŠ æ–°çš„å¯¹è±¡æˆ–å…ƒç´ 
*   **é£æ ¼ä¿®æ”¹**ï¼šæ”¹å˜å›¾ç‰‡çš„è‰ºæœ¯é£æ ¼æˆ–è‰²è°ƒ
*   **èƒŒæ™¯æ›¿æ¢**ï¼šæ›´æ¢å›¾ç‰‡èƒŒæ™¯åœºæ™¯
*   **å°ºå¯¸è°ƒæ•´**ï¼šæ”¹å˜å›¾ç‰‡æ¯”ä¾‹æˆ–å°ºå¯¸
*   **ç»†èŠ‚ä¼˜åŒ–**ï¼šå¢å¼ºå›¾ç‰‡è´¨é‡æˆ–ä¿®å¤ç¼ºé™·
*   **æ–‡æœ¬æ·»åŠ  / ç¼–è¾‘**ï¼šNano Banana Pro çš„æ–‡æœ¬æ¸²æŸ“èƒ½åŠ›æœ€å¼º

å¿«é€Ÿå¼€å§‹
----

### æ–¹å¼ä¸€ï¼šæœ€ç®€å•ç¤ºä¾‹ï¼ˆå•å›¾ç¼–è¾‘ï¼‰

```
import requests
import base64

API_KEY = "sk-your-api-key"
IMAGE_PATH = "./input.png"
PROMPT = "å¢åŠ ä¸€åªå¯çˆ±çš„å°çŒ«"

# è¯»å–å¹¶ç¼–ç å›¾ç‰‡
with open(IMAGE_PATH, 'rb') as f:
    img_b64 = base64.b64encode(f.read()).decode()

# å‘é€è¯·æ±‚
response = requests.post(
    "https://api.apiyi.com/v1beta/models/gemini-3-pro-image-preview:generateContent",
    headers={"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"},
    json={
        "contents": [{
            "parts": [
                {"text": PROMPT},
                {"inline_data": {"mime_type": "image/png", "data": img_b64}}
            ]
        }],
        "generationConfig": {
            "responseModalities": ["IMAGE"],
            "imageConfig": {"aspectRatio": "16:9", "imageSize": "2K"}
        }
    },
    timeout=300  # 2K æ¨è 5 åˆ†é’Ÿè¶…æ—¶
).json()

# ä¿å­˜ç»“æœ
img_data = response["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]
with open("output.png", 'wb') as f:
    f.write(base64.b64decode(img_data))


```

### æ–¹å¼äºŒï¼šç®€åŒ–ç‰ˆï¼ˆé…ç½®å¼ + å¤šå›¾æ”¯æŒï¼‰

**ç‰¹ç‚¹**ï¼šæ¸…æ™°çš„é…ç½®åŒºåŸŸã€æ”¯æŒå¤šå›¾è¾“å…¥ã€å®Œå–„çš„é”™è¯¯å¤„ç†ã€è‡ªåŠ¨è¶…æ—¶æ§åˆ¶

#### æ ¸å¿ƒé…ç½®ç¤ºä¾‹

```
# ============================================================================
# é…ç½®åŒºåŸŸ - è¯·åœ¨æ­¤å¤„ä¿®æ”¹æ‚¨çš„é…ç½®
# ============================================================================

# 1. API Keyï¼ˆå¿…å¡«ï¼‰
API_KEY = "sk-your-api-key"

# 2. è¾“å…¥å›¾ç‰‡ï¼ˆæ”¯æŒå¤šå¼ ï¼‰
INPUT_IMAGES = [
    "cat.png",           # ç¬¬ä¸€å¼ å›¾ç‰‡
    "dog.png",           # ç¬¬äºŒå¼ å›¾ç‰‡
    # "image3.png",      # å¯ä»¥æ·»åŠ æ›´å¤šå›¾ç‰‡
]

# 3. ç¼–è¾‘æŒ‡ä»¤
EDIT_PROMPT = "å°†è¿™ä¸¤å¼ å›¾ç‰‡åˆæˆï¼Œæ·»åŠ æ¸©é¦¨çš„å®¶åº­æ°›å›´å’ŒæŸ”å’ŒèƒŒæ™¯"

# 4. è¾“å‡ºå‚æ•°
ASPECT_RATIO = "16:9"  # å®½é«˜æ¯”ï¼ˆ1:1, 16:9, 9:16, 4:3, 3:4, 3:2, 2:3, 21:9, 5:4, 4:5ï¼‰
RESOLUTION = "2K"      # åˆ†è¾¨ç‡ï¼š1K, 2K, 4K
OUTPUT_FILE = f"edited_{datetime.now().strftime('%Y%m%d_%H%M%S')}.png"

# ============================================================================
# è¶…æ—¶é…ç½®ï¼ˆæ ¹æ®åˆ†è¾¨ç‡è‡ªåŠ¨è°ƒæ•´ï¼‰
# ============================================================================
TIMEOUT_MAP = {"1K": 180, "2K": 300, "4K": 360}  # å•ä½ï¼šç§’


```

#### å¤šå›¾ç‰‡è¾“å…¥ç¤ºä¾‹

```
import requests
import base64
import time
from pathlib import Path
from datetime import datetime

API_KEY = "sk-your-api-key"
API_URL = "https://api.apiyi.com/v1beta/models/gemini-3-pro-image-preview:generateContent"

# é…ç½®å¤šå¼ è¾“å…¥å›¾ç‰‡
INPUT_IMAGES = ["person1.png", "person2.png", "background.png"]
EDIT_PROMPT = "å°†è¿™ä¸‰å¼ å›¾ç‰‡åˆæˆä¸ºä¸€å¼ ä¸“ä¸šçš„å›¢é˜Ÿç…§ç‰‡"
RESOLUTION = "2K"
TIMEOUT_MAP = {"1K": 180, "2K": 300, "4K": 360}

def load_image_base64(image_path):
    """è¯»å–å›¾ç‰‡å¹¶è½¬æ¢ä¸º base64"""
    with open(image_path, "rb") as f:
        image_bytes = f.read()

    # è‡ªåŠ¨æ£€æµ‹å›¾ç‰‡æ ¼å¼
    if image_path.lower().endswith('.png'):
        mime_type = "image/png"
    elif image_path.lower().endswith(('.jpg', '.jpeg')):
        mime_type = "image/jpeg"
    elif image_path.lower().endswith('.webp'):
        mime_type = "image/webp"
    else:
        mime_type = "image/png"

    return base64.b64encode(image_bytes).decode("utf-8"), mime_type

# å‡†å¤‡æ‰€æœ‰å›¾ç‰‡
print(f"ğŸ“¤ æ­£åœ¨è¯»å– {len(INPUT_IMAGES)} å¼ å›¾ç‰‡...")
parts = []

for image_path in INPUT_IMAGES:
    image_base64, mime_type = load_image_base64(image_path)
    parts.append({
        "inline_data": {
            "mime_type": mime_type,
            "data": image_base64
        }
    })
    print(f"âœ… {image_path} ({mime_type})")

# æ·»åŠ ç¼–è¾‘æŒ‡ä»¤
parts.append({"text": EDIT_PROMPT})

# å‘é€è¯·æ±‚
print(f"\nâ³ æ­£åœ¨å¤„ç†ï¼Œé¢„è®¡ {TIMEOUT_MAP[RESOLUTION] // 60} åˆ†é’Ÿ...")
start_time = time.time()

response = requests.post(
    API_URL,
    headers={"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"},
    json={
        "contents": [{"parts": parts}],
        "generationConfig": {
            "responseModalities": ["IMAGE"],
            "imageConfig": {
                "aspectRatio": "16:9",
                "imageSize": RESOLUTION
            }
        }
    },
    timeout=TIMEOUT_MAP[RESOLUTION]
)

elapsed = time.time() - start_time
print(f"â±ï¸  å®é™…ç”¨æ—¶: {elapsed:.1f} ç§’")

# ä¿å­˜ç»“æœ
result = response.json()
image_data = result["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]

output_file = f"edited_{datetime.now().strftime('%Y%m%d_%H%M%S')}.png"
with open(output_file, 'wb') as f:
    f.write(base64.b64decode(image_data))

print(f"âœ… ç¼–è¾‘æˆåŠŸï¼å·²ä¿å­˜è‡³: {output_file}")


```

å®Œæ•´ä»£ç ç¤ºä¾‹
------

æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¹‹ä¸€ï¼š

### æ–¹å¼ä¸€ï¼šè°·æ­ŒåŸç”Ÿæ ¼å¼ï¼ˆæ¨èï¼‰

**æ”¯æŒè‡ªå®šä¹‰åˆ†è¾¨ç‡å’Œå®½é«˜æ¯”**ï¼Œä½¿ç”¨è°·æ­Œå®˜æ–¹ API æ ¼å¼ã€‚

#### ç«¯ç‚¹

```
POST https://api.apiyi.com/v1beta/models/gemini-2.5-flash-image:generateContent


```

#### è¯·æ±‚æ ¼å¼

```
{
  "contents": [
    {
      "parts": [
        {
          "text": "ç¼–è¾‘æŒ‡ä»¤æ–‡æœ¬"
        },
        {
          "inline_data": {
            "mime_type": "image/jpeg",
            "data": "base64ç¼–ç çš„å›¾ç‰‡æ•°æ®"
          }
        }
      ]
    }
  ],
  "generationConfig": {
    "responseModalities": ["IMAGE"],
    "imageConfig": {
      "aspectRatio": "16:9"
    }
  }
}


```

#### æ”¯æŒçš„å®½é«˜æ¯”

`21:9`, `16:9`, `4:3`, `3:2`, `1:1`, `9:16`, `3:4`, `2:3`, `5:4`, `4:5`

#### åˆ†è¾¨ç‡é…ç½®è¯¦è§£

*   Gemini 3 Pro (æ”¯æŒ 4K)
    
*   Gemini 2.5 Flash (ä»… 1K)
    

**æ¨¡å‹**: `gemini-3-pro-image-preview`æ”¯æŒä¸‰ä¸ªåˆ†è¾¨ç‡çº§åˆ«ï¼š**1K**ã€**2K**ã€**4K**

<table><thead><tr><th>å®½é«˜æ¯”</th><th>1K åˆ†è¾¨ç‡</th><th>1K Tokens</th><th>2K åˆ†è¾¨ç‡</th><th>2K Tokens</th><th>4K åˆ†è¾¨ç‡</th><th>4K Tokens</th></tr></thead><tbody><tr><td data-numeric="true"><strong>1:1</strong></td><td data-numeric="true">1024Ã—1024</td><td data-numeric="true">1210</td><td data-numeric="true">2048Ã—2048</td><td data-numeric="true">1210</td><td data-numeric="true">4096Ã—4096</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>2:3</strong></td><td data-numeric="true">848Ã—1264</td><td data-numeric="true">1210</td><td data-numeric="true">1696Ã—2528</td><td data-numeric="true">1210</td><td data-numeric="true">3392Ã—5056</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>3:2</strong></td><td data-numeric="true">1264Ã—848</td><td data-numeric="true">1210</td><td data-numeric="true">2528Ã—1696</td><td data-numeric="true">1210</td><td data-numeric="true">5056Ã—3392</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>3:4</strong></td><td data-numeric="true">896Ã—1200</td><td data-numeric="true">1210</td><td data-numeric="true">1792Ã—2400</td><td data-numeric="true">1210</td><td data-numeric="true">3584Ã—4800</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>4:3</strong></td><td data-numeric="true">1200Ã—896</td><td data-numeric="true">1210</td><td data-numeric="true">2400Ã—1792</td><td data-numeric="true">1210</td><td data-numeric="true">4800Ã—3584</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>4:5</strong></td><td data-numeric="true">928Ã—1152</td><td data-numeric="true">1210</td><td data-numeric="true">1856Ã—2304</td><td data-numeric="true">1210</td><td data-numeric="true">3712Ã—4608</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>5:4</strong></td><td data-numeric="true">1152Ã—928</td><td data-numeric="true">1210</td><td data-numeric="true">2304Ã—1856</td><td data-numeric="true">1210</td><td data-numeric="true">4608Ã—3712</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>9:16</strong></td><td data-numeric="true">768Ã—1376</td><td data-numeric="true">1210</td><td data-numeric="true">1536Ã—2752</td><td data-numeric="true">1210</td><td data-numeric="true">3072Ã—5504</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>16:9</strong></td><td data-numeric="true">1376Ã—768</td><td data-numeric="true">1210</td><td data-numeric="true">2752Ã—1536</td><td data-numeric="true">1210</td><td data-numeric="true">5504Ã—3072</td><td data-numeric="true">2000</td></tr><tr><td data-numeric="true"><strong>21:9</strong></td><td data-numeric="true">1584Ã—672</td><td data-numeric="true">1210</td><td data-numeric="true">3168Ã—1344</td><td data-numeric="true">1210</td><td data-numeric="true">6336Ã—2688</td><td data-numeric="true">2000</td></tr></tbody></table>

**æ¨¡å‹**: `gemini-2.5-flash-image`ä»…æ”¯æŒ **1K** åˆ†è¾¨ç‡ï¼ˆçº¦ 1024pxï¼‰

<table><thead><tr><th>å®½é«˜æ¯”</th><th>åˆ†è¾¨ç‡</th><th>Tokens</th></tr></thead><tbody><tr><td data-numeric="true"><strong>1:1</strong></td><td data-numeric="true">1024Ã—1024</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>2:3</strong></td><td data-numeric="true">832Ã—1248</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>3:2</strong></td><td data-numeric="true">1248Ã—832</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>3:4</strong></td><td data-numeric="true">864Ã—1184</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>4:3</strong></td><td data-numeric="true">1184Ã—864</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>4:5</strong></td><td data-numeric="true">896Ã—1152</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>5:4</strong></td><td data-numeric="true">1152Ã—896</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>9:16</strong></td><td data-numeric="true">768Ã—1344</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>16:9</strong></td><td data-numeric="true">1344Ã—768</td><td data-numeric="true">1290</td></tr><tr><td data-numeric="true"><strong>21:9</strong></td><td data-numeric="true">1536Ã—672</td><td data-numeric="true">1290</td></tr></tbody></table>

#### Bash ç¤ºä¾‹ï¼ˆGemini 2.5 Flash - ä»… 1Kï¼‰

é€‚ç”¨äº `gemini-2.5-flash-image`ï¼Œä»…æ”¯æŒ 1K åˆ†è¾¨ç‡ï¼š

```
API_KEY="sk-your-api-key"
INPUT_IMAGE="./dog.png"
PROMPT="å¢åŠ ä¸€åªå¸…æ°”çš„çŒ«å’ªåœ¨ç‹—ç‹—çš„æ—è¾¹"
ASPECT_RATIO="16:9"
OUTPUT_FILE="edited_$(date +%Y%m%d_%H%M%S).png"

# ç¼–ç å›¾ç‰‡
IMG_BASE64=$(base64 -i "$INPUT_IMAGE")

# å‘é€è¯·æ±‚å¹¶ä¿å­˜
curl -X POST "https://api.apiyi.com/v1beta/models/gemini-2.5-flash-image:generateContent" \
  -H "Authorization: Bearer $API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [{
      "parts": [
        {"text": "'"$PROMPT"'"},
        {"inline_data": {"mime_type": "image/png", "data": "'"$IMG_BASE64"'"}}
      ]
    }],
    "generationConfig": {
      "responseModalities": ["IMAGE"],
      "imageConfig": {"aspectRatio": "'"$ASPECT_RATIO"'"}
    }
  }' | jq -r '.candidates[0].content.parts[0].inlineData.data' | base64 --decode > "$OUTPUT_FILE"

echo "âœ… å›¾ç‰‡å·²ä¿å­˜: $OUTPUT_FILE"


```

#### Python å®Œæ•´ç¤ºä¾‹ï¼ˆGemini 3 Pro - æ”¯æŒ 4Kï¼‰

```
import requests
import base64

# é…ç½®
API_KEY = "sk-your-api-key"
API_URL = "https://api.apiyi.com/v1beta/models/gemini-3-pro-image-preview:generateContent"
INPUT_IMAGE = "./dog.png"
PROMPT = "å¢åŠ ä¸€åªå¸…æ°”çš„çŒ«å’ªåœ¨ç‹—ç‹—çš„æ—è¾¹"
ASPECT_RATIO = "16:9"  # å¯é€‰: "1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"
RESOLUTION = "2K"       # å¯é€‰: "1K", "2K", "4K"

# è¯»å–å¹¶ç¼–ç å›¾ç‰‡
with open(INPUT_IMAGE, 'rb') as f:
    image_base64 = base64.b64encode(f.read()).decode('utf-8')

# å‘é€è¯·æ±‚
response = requests.post(
    API_URL,
    headers={"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"},
    json={
        "contents": [{
            "parts": [
                {"text": PROMPT},
                {"inline_data": {"mime_type": "image/png", "data": image_base64}}
            ]
        }],
        "generationConfig": {
            "responseModalities": ["IMAGE"],
            "imageConfig": {
                "aspectRatio": ASPECT_RATIO,
                "imageSize": RESOLUTION  # Gemini 3 Pro ä¸“å±å‚æ•°
            }
        }
    },
    timeout=120
)

# ä¿å­˜ç»“æœ
result = response.json()
image_data = result["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]

with open("edited_output.png", 'wb') as f:
    f.write(base64.b64decode(image_data))

print("âœ… å›¾ç‰‡å·²ä¿å­˜: edited_output.png")


```

#### Bash/cURL å®Œæ•´ç¤ºä¾‹ï¼ˆæ”¯æŒ 4Kï¼‰

```
#!/bin/bash

API_KEY="sk-your-api-key"
INPUT_IMAGE="./photo.jpg"
PROMPT="å°†è¿™å¼ ç…§ç‰‡è½¬æ¢ä¸ºä¸“ä¸šæ‘„å½±ä½œå“ï¼Œåº”ç”¨ç”µå½±çº§è‰²å½©åˆ†çº§"
ASPECT_RATIO="16:9"
RESOLUTION="4K"  # "1K", "2K", "4K"
OUTPUT_FILE="edited_4k.png"

# ç¼–ç å›¾ç‰‡
IMG_BASE64=$(base64 -i "$INPUT_IMAGE")

# å‘é€è¯·æ±‚å¹¶ä¿å­˜
curl -X POST "https://api.apiyi.com/v1beta/models/gemini-3-pro-image-preview:generateContent" \
  -H "Authorization: Bearer $API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [{
      "parts": [
        {"text": "'"$PROMPT"'"},
        {"inline_data": {"mime_type": "image/jpeg", "data": "'"$IMG_BASE64"'"}}
      ]
    }],
    "generationConfig": {
      "responseModalities": ["IMAGE"],
      "imageConfig": {
        "aspectRatio": "'"$ASPECT_RATIO"'",
        "imageSize": "'"$RESOLUTION"'"
      }
    }
  }' | jq -r '.candidates[0].content.parts[0].inlineData.data' | base64 --decode > "$OUTPUT_FILE"

echo "âœ… 4K å›¾ç‰‡å·²ä¿å­˜: $OUTPUT_FILE"


```

### æ–¹å¼äºŒï¼šOpenAI å…¼å®¹æ¨¡å¼

**å…¼å®¹ç°æœ‰ OpenAI æ ¼å¼ä»£ç **ï¼Œé€‚åˆå¿«é€Ÿé›†æˆã€‚ç¼–è¾‘å›¾ç‰‡æ—¶ä¼šæ™ºèƒ½éµå¾ªåŸå›¾æ¯”ä¾‹ã€‚

#### ç«¯ç‚¹

```
POST https://api.apiyi.com/v1/chat/completions


```

#### è¯·æ±‚æ ¼å¼

```
{
  "model": "gemini-2.5-flash-image",
  "stream": false,
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": "ç¼–è¾‘æŒ‡ä»¤æ–‡æœ¬"
        },
        {
          "type": "image_url",
          "image_url": {
            "url": "å›¾ç‰‡URL1"
          }
        },
        {
          "type": "image_url",
          "image_url": {
            "url": "å›¾ç‰‡URL2"
          }
        }
      ]
    }
  ]
}


```

#### Python å®Œæ•´ç¤ºä¾‹

```
#!/usr/bin/env python3
import requests
import json
import base64
import re
from datetime import datetime
import sys

# é…ç½®
API_KEY = "sk-"  # è¯·æ›¿æ¢ä¸ºä½ çš„å®é™…å¯†é’¥
API_URL = "https://api.apiyi.com/v1/chat/completions"

def edit_images():
    """
    å›¾ç‰‡ç¼–è¾‘ä¸»å‡½æ•°
    æ”¯æŒå¤šå›¾ç‰‡åˆæˆå’Œç¼–è¾‘
    """
    # è®¾ç½®è¯·æ±‚å¤´
    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }
    
    # è¯·æ±‚æ•°æ® - å¤šå›¾ç‰‡åˆæˆç¤ºä¾‹
    data = {
        "model": "gemini-2.5-flash-image",
        "stream": False,
        "messages": [
            {
                "role": "user",
                "content": [
                    {
                        "type": "text",
                        "text": "Combine 2 images and add a Corgi dog image"
                    },
                    {
                        "type": "image_url",
                        "image_url": {
                            "url": "https://github.com/dianping/cat/raw/master/cat-home/src/main/webapp/images/logo/cat_logo03.png"
                        }
                    },
                    {
                        "type": "image_url",
                        "image_url": {
                            "url": "https://raw.githubusercontent.com/leonindy/camel/master/camel-admin/src/main/webapp/assets/images/camel_logo_blue.png"
                        }
                    }
                ]
            }
        ]
    }
    
    print("ğŸš€ æ­£åœ¨è¯·æ±‚å›¾ç‰‡ç¼–è¾‘API...")
    print(f"ğŸ“ ç¼–è¾‘æŒ‡ä»¤: {data['messages'][0]['content'][0]['text']}")
    print(f"ğŸ–¼ï¸  è¾“å…¥å›¾ç‰‡æ•°é‡: {len([c for c in data['messages'][0]['content'] if c['type'] == 'image_url'])}")
    
    try:
        # å‘é€è¯·æ±‚
        response = requests.post(API_URL, headers=headers, json=data)
        response.raise_for_status()
        
        print("âœ… APIè¯·æ±‚æˆåŠŸï¼Œæ­£åœ¨å¤„ç†å“åº”...")
        
        # è§£æå“åº”
        result = response.json()
        
        # æå–å†…å®¹
        content = result['choices'][0]['message']['content']
        print(f"ğŸ“„ æ”¶åˆ°å†…å®¹é•¿åº¦: {len(content)} å­—ç¬¦")
        print(f"ğŸ“„ å†…å®¹é¢„è§ˆ: {content[:200]}...")
        
        # æŸ¥æ‰¾Base64å›¾ç‰‡æ•°æ®
        base64_data = None
        
        # æ–¹æ³•1: æŸ¥æ‰¾æ ‡å‡†æ ¼å¼ data:image/type;base64,data
        base64_match = re.search(r'data:image/[^;]+;base64,([A-Za-z0-9+/=]+)', content)
        
        if base64_match:
            base64_data = base64_match.group(1)
            print("âœ… æ‰¾åˆ°æ ‡å‡†æ ¼å¼çš„Base64æ•°æ®")
        else:
            # æ–¹æ³•2: æŸ¥æ‰¾çº¯Base64æ•°æ®ï¼ˆé•¿å­—ç¬¦ä¸²ï¼‰
            base64_match = re.search(r'([A-Za-z0-9+/=]{100,})', content)
            if base64_match:
                base64_data = base64_match.group(1)
                print("âœ… æ‰¾åˆ°çº¯Base64æ•°æ®")
            else:
                print("âŒ é”™è¯¯: æ— æ³•æ‰¾åˆ°Base64å›¾ç‰‡æ•°æ®")
                print("ğŸ“„ å®Œæ•´å“åº”å†…å®¹:")
                print(json.dumps(result, indent=2, ensure_ascii=False))
                return False
        
        # ç”Ÿæˆæ–‡ä»¶å
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        filename = f"edited_image_{timestamp}.png"
        
        print("ğŸ’¾ æ­£åœ¨ä¿å­˜ç¼–è¾‘åçš„å›¾ç‰‡...")
        
        # è§£ç å¹¶ä¿å­˜å›¾ç‰‡
        try:
            image_data = base64.b64decode(base64_data)
            with open(filename, 'wb') as f:
                f.write(image_data)
            
            print(f"ğŸ‰ å›¾ç‰‡ç¼–è¾‘å®Œæˆï¼")
            print(f"ğŸ“ æ–‡ä»¶ä¿å­˜ä¸º: {filename}")
            print(f"ğŸ“Š æ–‡ä»¶å¤§å°: {len(image_data):,} å­—èŠ‚")
            return True
            
        except Exception as e:
            print(f"âŒ é”™è¯¯: ä¿å­˜å›¾ç‰‡æ—¶å‡ºç°é—®é¢˜: {e}")
            return False
            
    except requests.exceptions.RequestException as e:
        print(f"âŒ é”™è¯¯: APIè¯·æ±‚å¤±è´¥: {e}")
        return False
    except KeyError as e:
        print(f"âŒ é”™è¯¯: å“åº”æ ¼å¼ä¸æ­£ç¡®ï¼Œç¼ºå°‘å­—æ®µ: {e}")
        if 'response' in locals():
            print("ğŸ“„ å®Œæ•´å“åº”å†…å®¹:")
            print(json.dumps(response.json(), indent=2, ensure_ascii=False))
        return False
    except Exception as e:
        print(f"âŒ é”™è¯¯: æœªçŸ¥é”™è¯¯: {e}")
        return False

def custom_edit_example():
    """
    è‡ªå®šä¹‰ç¼–è¾‘ç¤ºä¾‹
    """
    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }
    
    # è‡ªå®šä¹‰ç¼–è¾‘ä»»åŠ¡
    data = {
        "model": "gemini-2.5-flash-image",
        "stream": False,
        "messages": [
            {
                "role": "user",
                "content": [
                    {
                        "type": "text",
                        "text": "Please remove the background and make it transparent, then add a sunset background"
                    },
                    {
                        "type": "image_url",
                        "image_url": {
                            "url": "your_image_url_here"  # æ›¿æ¢ä¸ºä½ çš„å›¾ç‰‡URL
                        }
                    }
                ]
            }
        ]
    }
    
    print("ğŸ¨ æ‰§è¡Œè‡ªå®šä¹‰ç¼–è¾‘ä»»åŠ¡...")
    # è°ƒç”¨ç¼–è¾‘é€»è¾‘...

def main():
    """
    ä¸»å‡½æ•° - æ¼”ç¤ºä¸åŒçš„ç¼–è¾‘åŠŸèƒ½
    """
    print("=" * 60)
    print("Nano Banana å›¾ç‰‡ç¼–è¾‘å™¨ - Pythonç‰ˆæœ¬")
    print("=" * 60)
    print(f"ğŸ• å¼€å§‹æ—¶é—´: {datetime.now()}")
    
    # æ£€æŸ¥API Key
    if API_KEY == "sk-":
        print("âš ï¸  è¯·å…ˆè®¾ç½®æ­£ç¡®çš„APIå¯†é’¥")
        return
    
    print("\nğŸ”§ å¯ç”¨çš„ç¼–è¾‘åŠŸèƒ½:")
    print("1. å¤šå›¾ç‰‡åˆæˆ")
    print("2. èƒŒæ™¯æ›¿æ¢") 
    print("3. å…ƒç´ æ·»åŠ ")
    print("4. é£æ ¼è½¬æ¢")
    
    print("\nğŸš€ æ‰§è¡Œå¤šå›¾ç‰‡åˆæˆç¤ºä¾‹...")
    success = edit_images()
    
    print("\n" + "=" * 60)
    if success:
        print("ğŸ‰ ç¼–è¾‘ä»»åŠ¡æ‰§è¡ŒæˆåŠŸï¼")
        print("âœ… å›¾ç‰‡å·²ä¿å­˜åˆ°æœ¬åœ°")
    else:
        print("âŒ ç¼–è¾‘ä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼")
        print("ğŸ’¡ è¯·æ£€æŸ¥APIå¯†é’¥å’Œç½‘ç»œè¿æ¥")
    
    print(f"ğŸ• ç»“æŸæ—¶é—´: {datetime.now()}")
    print("=" * 60)

if __name__ == "__main__":
    success = main()
    sys.exit(0 if success else 1)


```

ç¼–è¾‘ç¤ºä¾‹åœºæ™¯
------

### Nano Banana Pro é«˜çº§åœºæ™¯

#### 1. 4K é«˜æ¸…å•†ä¸šæµ·æŠ¥ç¼–è¾‘

```
import requests
import base64

API_KEY = "sk-your-api-key"
API_URL = "https://api.apiyi.com/v1beta/models/gemini-3-pro-image-preview:generateContent"

# è¯»å–å›¾ç‰‡
with open('product.png', 'rb') as f:
    image_base64 = base64.b64encode(f.read()).decode('utf-8')

# 4K é«˜æ¸…ç¼–è¾‘ - é€‚åˆå•†ä¸šå°åˆ·
payload = {
    "contents": [{
        "parts": [
            {"text": "å°†è¿™ä¸ªäº§å“ç…§ç‰‡è½¬æ¢ä¸ºä¸“ä¸šå•†ä¸šæµ·æŠ¥ï¼Œæ·»åŠ é«˜ç«¯è´¨æ„Ÿå’Œå®Œç¾ç…§æ˜"},
            {"inline_data": {"mime_type": "image/png", "data": image_base64}}
        ]
    }],
    "generationConfig": {
        "responseModalities": ["IMAGE"],
        "imageConfig": {
            "aspectRatio": "3:4",
            "imageSize": "4K"  # è¾“å‡º 3584Ã—4800 åƒç´ 
        }
    }
}

headers = {"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"}
response = requests.post(API_URL, headers=headers, json=payload, timeout=120)
result = response.json()

# ä¿å­˜ 4K å›¾ç‰‡
image_data = result["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]
with open("poster_4k.png", 'wb') as f:
    f.write(base64.b64decode(image_data))


```

#### 2. å±€éƒ¨ç²¾ç»†ç¼–è¾‘

```
# è°ƒæ•´æ‘„åƒæœºè§’åº¦å’Œç„¦ç‚¹
{
  "type": "text",
  "text": "Change camera angle to bird's eye view and adjust focus to the foreground"
}


```

#### 3. åœºæ™¯ç…§æ˜æ§åˆ¶

```
# æ—¥å¤œè½¬æ¢å’ŒèƒŒæ™¯è™šåŒ–
{
  "type": "text",
  "text": "Transform this daytime photo to nighttime with bokeh effect in the background"
}


```

#### 4. ä¸“ä¸šè‰²å½©åˆ†çº§

```
# åº”ç”¨ç”µå½±çº§è‰²å½©æ•ˆæœ
{
  "type": "text",
  "text": "Apply cinematic color grading with warm tones and enhanced contrast"
}


```

### é€šç”¨ç¼–è¾‘åœºæ™¯

#### 5. å¤šå›¾ç‰‡åˆæˆï¼ˆæ”¯æŒ 2K/4Kï¼‰

```
import requests
import base64

API_KEY = "sk-your-api-key"
API_URL = "https://api.apiyi.com/v1beta/models/gemini-3-pro-image-preview:generateContent"

# è¯»å–å¤šå¼ å›¾ç‰‡
def read_image(path):
    with open(path, 'rb') as f:
        return base64.b64encode(f.read()).decode('utf-8')

# å¤šå›¾ç‰‡åˆæˆ - å›¢é˜Ÿç…§ç‰‡åˆæˆ
payload = {
    "contents": [{
        "parts": [
            {"text": "Create a professional office team photo with these people, modern office background"},
            {"inline_data": {"mime_type": "image/png", "data": read_image('person1.png')}},
            {"inline_data": {"mime_type": "image/png", "data": read_image('person2.png')}},
            {"inline_data": {"mime_type": "image/png", "data": read_image('person3.png')}},
            {"inline_data": {"mime_type": "image/png", "data": read_image('person4.png')}}
        ]
    }],
    "generationConfig": {
        "responseModalities": ["IMAGE"],
        "imageConfig": {
            "aspectRatio": "16:9",
            "imageSize": "2K"  # 2K è¶³å¤Ÿé«˜æ¸…ï¼Œé€Ÿåº¦æ›´å¿«
        }
    }
}

headers = {"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"}
response = requests.post(API_URL, headers=headers, json=payload, timeout=120)
result = response.json()

# ä¿å­˜ç»“æœ
image_data = result["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]
with open("team_photo.png", 'wb') as f:
    f.write(base64.b64decode(image_data))


```

#### 6. OpenAI æ ¼å¼å¤šå›¾åˆæˆ

```
# å°†ä¸¤ä¸ªlogoåˆæˆï¼Œå¹¶æ·»åŠ æ–°å…ƒç´ ï¼ˆOpenAI å…¼å®¹æ ¼å¼ï¼‰
{
  "type": "text",
  "text": "Combine these two logos and add a cute animal"
}


```

#### 7. èƒŒæ™¯æ›¿æ¢

```
# æ›¿æ¢å›¾ç‰‡èƒŒæ™¯
{
  "type": "text",
  "text": "Remove the background and add a sunset landscape"
}


```

#### 8. é£æ ¼è½¬æ¢

```
# æ”¹å˜å›¾ç‰‡é£æ ¼
{
  "type": "text",
  "text": "Convert this photo to anime/cartoon style"
}


```

#### 9. å…ƒç´ ä¿®æ”¹

```
# æ·»åŠ æˆ–åˆ é™¤å…ƒç´ 
{
  "type": "text",
  "text": "Add sunglasses to the person and change hair color to blue"
}


```

ä½¿ç”¨å»ºè®®
----

### é€‰æ‹©åˆé€‚çš„è°ƒç”¨æ–¹å¼

### è¿ç§»æŒ‡å—

å¦‚æœæ‚¨å½“å‰ä½¿ç”¨é¢„è§ˆç‰ˆæ¨¡å‹æˆ–å¸Œæœ›è¿ç§»åˆ°è°·æ­ŒåŸç”Ÿæ ¼å¼ï¼Œè¯·å‚è€ƒï¼š

æœ€ä½³å®è·µ
----

### ç¼–è¾‘æŒ‡ä»¤ä¼˜åŒ–

### å›¾ç‰‡è¾“å…¥å»ºè®®

*   **æ ¼å¼æ”¯æŒ**ï¼šPNGã€JPEGã€GIF ç­‰ä¸»æµæ ¼å¼
*   **åˆ†è¾¨ç‡**ï¼šå»ºè®®ä¸è¶…è¿‡ 4096x4096
*   **æ–‡ä»¶å¤§å°**ï¼šå•å¼ å›¾ç‰‡å»ºè®®ä¸è¶…è¿‡ 10MB
*   **URL è¦æ±‚**ï¼šç¡®ä¿å›¾ç‰‡ URL å¯å…¬å¼€è®¿é—®

### ç¼–è¾‘è´¨é‡ä¼˜åŒ–

1.  **é«˜è´¨é‡è¾“å…¥**ï¼šä½¿ç”¨æ¸…æ™°ã€é«˜åˆ†è¾¨ç‡çš„åŸå›¾
2.  **åˆç†æŒ‡ä»¤**ï¼šé¿å…è¿‡äºå¤æ‚æˆ–çŸ›ç›¾çš„ç¼–è¾‘è¦æ±‚
3.  **å¤šæ¬¡è¿­ä»£**ï¼šå¯¹å¤æ‚ç¼–è¾‘å¯ä»¥åˆ†å¤šæ­¥è¿›è¡Œ
4.  **å‚è€ƒç¤ºä¾‹**ï¼šå‚è€ƒæˆåŠŸçš„ç¼–è¾‘æ¡ˆä¾‹

### åˆ†è¾¨ç‡é€‰æ‹©æŒ‡å—

é”™è¯¯å¤„ç†
----

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

å®šä»·ä¿¡æ¯
----

### Nano Banana Pro (`gemini-3-pro-image-preview`)

æŒ‰æ¬¡è®¡è´¹ï¼Œæ‰€æœ‰åˆ†è¾¨ç‡ç»Ÿä¸€ä»·æ ¼ï¼š

<table><thead><tr><th>åˆ†è¾¨ç‡</th><th>API æ˜“ä»·æ ¼</th><th>å®˜æ–¹ä»·æ ¼</th><th>ç­‰äºå®˜ç½‘çš„</th><th>å……å€¼åŠ èµ ä»·æ ¼</th><th>ç”Ÿæˆæ—¶é—´</th><th>æ¨èåœºæ™¯</th></tr></thead><tbody><tr><td data-numeric="true"><strong>1K-2K</strong></td><td data-numeric="true">$0.050 / å¼ </td><td data-numeric="true">$0.134 / å¼ </td><td data-numeric="true">30%</td><td>ï¿¥0.29 / å¼ </td><td data-numeric="true">20-25 ç§’</td><td>é«˜æ¸…ç½‘é¡µ / ç¤¾äº¤åª’ä½“</td></tr><tr><td data-numeric="true"><strong>4K</strong></td><td data-numeric="true">$0.050 / å¼ </td><td data-numeric="true">$0.24 / å¼ </td><td data-numeric="true">17%</td><td>ï¿¥0.29 / å¼ </td><td data-numeric="true">30-40 ç§’</td><td>ä¸“ä¸šå°åˆ· / å•†ä¸šè®¾è®¡</td></tr></tbody></table>

**ç‰¹æ€§ä¼˜åŠ¿**ï¼š

*   ğŸ¯ æ”¯æŒ 4K è¶…é«˜æ¸…è¾“å‡º
*   ğŸ“ å±€éƒ¨ç²¾ç»†ç¼–è¾‘èƒ½åŠ›ï¼ˆæ‘„åƒæœºã€ç„¦ç‚¹ã€è‰²å½©ï¼‰
*   ğŸŒ“ åœºæ™¯ç…§æ˜æ§åˆ¶
*   ğŸ“ ä¸šç•Œæœ€ä½³æ–‡æœ¬æ¸²æŸ“

### å‰ä»£ç‰ˆæœ¬ (`gemini-2.5-flash-image`)

*   **API æ˜“ä»·æ ¼**ï¼š$0.025 / å¼ ï¼ˆä»… 1K åˆ†è¾¨ç‡ï¼‰
*   **å®˜æ–¹ä»·æ ¼**ï¼šçº¦ $0.039 / å¼ 
*   **ç­‰äºå®˜ç½‘çš„**ï¼š52%ï¼ŒèŠ‚çœ 48%
*   **å……å€¼åŠ èµ ä»·æ ¼**ï¼šçº¦ ï¿¥0.15 / å¼ 
*   **ç”Ÿæˆæ—¶é—´**ï¼š10-15 ç§’
*   **æ¨èåœºæ™¯**ï¼šå¿«é€Ÿç¼–è¾‘ã€å¸¸è§„å›¾åƒå¤„ç†

### æˆæœ¬å¯¹æ¯”è®¡ç®—å™¨

é«˜çº§åŠŸèƒ½
----

### æ‰¹é‡ç¼–è¾‘

```
def batch_edit_images(image_urls, edit_instruction):
    """æ‰¹é‡ç¼–è¾‘å¤šå¼ å›¾ç‰‡"""
    results = []
    for i, url in enumerate(image_urls):
        data = {
            "model": "gemini-2.5-flash-image",
            "messages": [{
                "role": "user", 
                "content": [
                    {"type": "text", "text": edit_instruction},
                    {"type": "image_url", "image_url": {"url": url}}
                ]
            }]
        }
        # æ‰§è¡Œç¼–è¾‘...
        results.append(result)
    return results


```

### ç¼–è¾‘å†å²è®°å½•

```
def save_edit_history(original_url, instruction, result_path):
    """ä¿å­˜ç¼–è¾‘å†å²è®°å½•"""
    history = {
        "timestamp": datetime.now().isoformat(),
        "original_image": original_url,
        "edit_instruction": instruction,
        "result_path": result_path
    }
    # ä¿å­˜åˆ°æ–‡ä»¶æˆ–æ•°æ®åº“...


```

ç›¸å…³æ–‡æ¡£
----

*   [Nano Banana å›¾ç‰‡ç”Ÿæˆ](https://docs.apiyi.com/api-capabilities/nano-banana-image)
*   [å…¶ä»–å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½](https://docs.apiyi.com/api-capabilities/image-edit)
*   [å›¾ç‰‡ç”Ÿæˆå¯¹æ¯”æµ‹è¯•](https://imagen.apiyi.com/)
*   [API ä½¿ç”¨æ‰‹å†Œ](https://docs.apiyi.com/api-manual)