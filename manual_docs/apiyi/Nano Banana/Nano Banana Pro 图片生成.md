> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [docs.apiyi.com](https://docs.apiyi.com/api-capabilities/nano-banana-image)

> è°·æ­Œæœ€æ–°ã€æœ€å¼ºçš„å›¾åƒç”Ÿæˆæ¨¡å‹ Gemini 2.5 Flash Imageï¼Œä»£å· Nano Bananaã€‚æ”¯æŒè‡ªå®šä¹‰åˆ†è¾¨ç‡ã€10 ç§å®½é«˜æ¯”ï¼Œ10 ç§’å¿«é€Ÿç”Ÿæˆï¼Œå®˜ç½‘ 7 æŠ˜ä¼˜æƒ ã€‚

æ¦‚è¿°
--

**Nano Banana**ï¼ˆä»£å·ï¼‰æ˜¯è°·æ­Œå›¾åƒç”Ÿæˆæ¨¡å‹ç³»åˆ—ï¼Œç›®å‰æœ‰ä»¥ä¸‹ç‰ˆæœ¬å¯ç”¨ï¼š

### æœ€æ–°ç‰ˆæœ¬ï¼ˆæ¨èï¼‰

*   **Nano Banana Pro**ï¼š`gemini-3-pro-image-preview`ï¼ˆğŸ”¥ 2025 å¹´ 11 æœˆ 20 æ—¥ä¸Šçº¿ï¼‰
    *   åŸºäº Gemini 3 Proï¼Œæ¨ç†èƒ½åŠ›æ›´å¼º
    *   æ”¯æŒ 4K é«˜æ¸…å›¾åƒç”Ÿæˆï¼ˆ1Kã€2Kã€4Kï¼‰
    *   ä¸šç•Œæœ€ä½³æ–‡æœ¬æ¸²æŸ“èƒ½åŠ›
    *   æ”¯æŒé«˜çº§å±€éƒ¨ç¼–è¾‘åŠŸèƒ½

### å‰ä»£ç‰ˆæœ¬

*   **æ­£å¼ç‰ˆ**ï¼š`gemini-2.5-flash-image`ï¼ˆç¨³å®šç‰ˆï¼Œæ”¯æŒ 10 ç§å®½é«˜æ¯”ï¼‰
*   **é¢„è§ˆç‰ˆ**ï¼š`gemini-2.5-flash-image-preview`ï¼ˆâš ï¸ å·²äº 2025 å¹´ 10 æœˆ 30 æ—¥ä¸‹çº¿ï¼‰

[

ğŸ“š æœ€æ–°æ–‡æ¡£
-------

**é£ä¹¦å®Œæ•´ä½¿ç”¨æŒ‡å—** - æ›´æ–°æœ€å¿«ï¼Œæ”¯æŒè¯„è®ºäº’åŠ¨è®¿é—®é£ä¹¦æ–‡æ¡£è·å–æœ€æ–°çš„ä½¿ç”¨æ•™ç¨‹ã€æŠ€å·§åˆ†äº«å’Œé—®é¢˜è§£ç­”ã€‚æ–‡æ¡£æŒç»­æ›´æ–°ï¼Œé‡åˆ°é—®é¢˜å¯ç›´æ¥åœ¨é£ä¹¦ä¸Šè¯„è®ºäº¤æµã€‚

](https://xinqikeji.feishu.cn/wiki/W4vEwdiCPi3VfTkrL5hcVlDxnQf)

è°ƒç”¨æ–¹å¼å¯¹æ¯”
------

API æ˜“ æ”¯æŒä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼š

### ç«¯ç‚¹å¯¹æ¯”è¡¨

<table><thead><tr><th>ç‰¹æ€§</th><th>è°·æ­ŒåŸç”Ÿæ ¼å¼</th><th>OpenAI å…¼å®¹æ¨¡å¼</th></tr></thead><tbody><tr><td><strong>ç«¯ç‚¹ URL</strong></td><td><code>/v1beta/models/gemini-2.5-flash-image:generateContent</code></td><td><code>/v1/chat/completions</code></td></tr><tr><td><strong>è¾“å‡ºå°ºå¯¸</strong></td><td>æ”¯æŒ 10 ç§å®½é«˜æ¯”è‡ªå®šä¹‰</td><td>é»˜è®¤ 1:1</td></tr><tr><td><strong>è°ƒç”¨æ ¼å¼</strong></td><td>è°·æ­Œå®˜æ–¹æ ¼å¼</td><td>OpenAI æ ¼å¼</td></tr><tr><td><strong>å…¼å®¹æ€§</strong></td><td>è°·æ­ŒåŸç”Ÿ API</td><td>gpt-4o-imageã€sora_image</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>éœ€è¦ç²¾ç¡®æ§åˆ¶è¾“å‡ºå°ºå¯¸</td><td>å¿«é€Ÿé›†æˆï¼Œå…¼å®¹ç°æœ‰ä»£ç </td></tr></tbody></table>

### OpenAI å…¼å®¹æ¨¡å¼ç«¯ç‚¹è¯´æ˜

#### æ­£ç¡®ç«¯ç‚¹ âœ…

```
POST /v1/chat/completions


```

#### é”™è¯¯ç«¯ç‚¹ âŒ

```
POST /v1/images/generations  # ä¸æ”¯æŒæ­¤ç«¯ç‚¹


```

å…¼å®¹æ€§è¯´æ˜
-----

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ä»¥ä¸‹æ¨¡å‹ï¼Œå¯ä»¥ç›´æ¥æ›¿æ¢æ¨¡å‹åç§°ï¼š

### å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

*   ä»»ä½•æ—§ç‰ˆæœ¬ â†’ `gemini-3-pro-image-preview`ï¼ˆğŸ”¥ æ¨èï¼ŒNano Banana Proï¼‰
    *   æ”¯æŒ 4K é«˜æ¸…å‡ºå›¾
    *   æ–‡æœ¬æ¸²æŸ“èƒ½åŠ›æœ€å¼º
    *   å±€éƒ¨ç¼–è¾‘åŠŸèƒ½

### ä½¿ç”¨ç¨³å®šç‰ˆæœ¬

*   `gpt-4o-image` â†’ `gemini-2.5-flash-image`
*   `sora_image` â†’ `gemini-2.5-flash-image`
*   æ—§ç‰ˆ Nano Banana â†’ `gemini-2.5-flash-image`

å…¶ä»–å‚æ•°ä¿æŒä¸å˜ï¼Œå³å¯æ— ç¼åˆ‡æ¢ä½¿ç”¨ã€‚

å¿«é€Ÿå¼€å§‹
----

### æ–¹å¼ä¸€ï¼šæœ€ç®€å•ç¤ºä¾‹ï¼ˆåŸºç¡€ç”Ÿæˆï¼‰

```
import requests
import base64

API_KEY = "sk-your-api-key"
PROMPT = "ä¸€åªå¯çˆ±çš„å°çŒ«ååœ¨èŠ±å›­é‡Œï¼Œæ²¹ç”»é£æ ¼ï¼Œé«˜æ¸…ï¼Œç»†èŠ‚ä¸°å¯Œ"

# å‘é€è¯·æ±‚
response = requests.post(
    "https://api.apiyi.com/v1beta/models/gemini-3-pro-image-preview:generateContent",
    headers={"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"},
    json={
        "contents": [{"parts": [{"text": PROMPT}]}],
        "generationConfig": {
            "responseModalities": ["IMAGE"],
            "imageConfig": {"aspectRatio": "16:9", "imageSize": "2K"}
        }
    },
    timeout=300  # 2K æ¨è 5 åˆ†é’Ÿè¶…æ—¶
).json()

# ä¿å­˜ç»“æœ
img_data = response["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]
with open("output.png", 'wb') as f:
    f.write(base64.b64decode(img_data))


```

### æ–¹å¼äºŒï¼šç®€åŒ–ç‰ˆï¼ˆé…ç½®å¼ + å®Œæ•´åŠŸèƒ½ï¼‰

**ç‰¹ç‚¹**ï¼šæ¸…æ™°çš„é…ç½®åŒºåŸŸã€å®Œå–„çš„é”™è¯¯å¤„ç†ã€æ™ºèƒ½è¶…æ—¶æ§åˆ¶ã€è‡ªåŠ¨æ–‡ä»¶å‘½å

#### æ ¸å¿ƒé…ç½®ç¤ºä¾‹

```
# ============================================================================
# é…ç½®åŒºåŸŸ - è¯·åœ¨æ­¤å¤„ä¿®æ”¹æ‚¨çš„é…ç½®
# ============================================================================

# 1. API Keyï¼ˆå¿…å¡«ï¼‰
API_KEY = "sk-your-api-key"

# 2. å›¾ç‰‡æè¿°
PROMPT = "ä¸€åªå¯çˆ±çš„å°çŒ«å’ªååœ¨èŠ±å›­é‡Œï¼Œæ²¹ç”»é£æ ¼ï¼Œé«˜æ¸…ï¼Œç»†èŠ‚ä¸°å¯Œ"

# 3. å›¾ç‰‡å‚æ•°
ASPECT_RATIO = "16:9"  # å®½é«˜æ¯”ï¼š1:1, 16:9, 9:16, 4:3, 3:4, 3:2, 2:3, 21:9, 5:4, 4:5
RESOLUTION = "2K"      # åˆ†è¾¨ç‡ï¼š1K, 2K, 4K ï¼ˆæ¨è 2Kï¼‰

# 4. è¾“å‡ºæ–‡ä»¶åï¼ˆè‡ªåŠ¨æ·»åŠ æ—¶é—´æˆ³ï¼‰
OUTPUT_FILE = f"NanoBananaPro_{datetime.now().strftime('%Y%m%d_%H%M%S')}.png"

# ============================================================================
# è¶…æ—¶é…ç½®ï¼ˆæ ¹æ®åˆ†è¾¨ç‡è‡ªåŠ¨è°ƒæ•´ï¼‰
# ============================================================================
TIMEOUT_MAP = {"1K": 180, "2K": 300, "4K": 360}  # å•ä½ï¼šç§’


```

#### å®Œæ•´ç”Ÿæˆç¤ºä¾‹

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
import requests
import base64
import time
from datetime import datetime

# ============================================================================
# é…ç½®åŒºåŸŸ
# ============================================================================
API_KEY = "sk-your-api-key"
API_URL = "https://api.apiyi.com/v1beta/models/gemini-3-pro-image-preview:generateContent"

PROMPT = "ä¸€åªå¯çˆ±çš„å°çŒ«ååœ¨èŠ±å›­é‡Œï¼Œæ²¹ç”»é£æ ¼ï¼Œé«˜æ¸…ï¼Œç»†èŠ‚ä¸°å¯Œ"
ASPECT_RATIO = "16:9"  # å¯é€‰: 1:1, 16:9, 9:16, 4:3, 3:4, 3:2, 2:3, 21:9, 5:4, 4:5
RESOLUTION = "2K"      # å¯é€‰: 1K, 2K, 4K
OUTPUT_FILE = f"NanoBananaPro_{datetime.now().strftime('%Y%m%d_%H%M%S')}.png"

# è¶…æ—¶é…ç½®
TIMEOUT_MAP = {"1K": 180, "2K": 300, "4K": 360}

def generate_image():
    """ç”Ÿæˆå›¾ç‰‡"""

    print(f"\n{'='*60}")
    print(f"ğŸ¨ å¼€å§‹ç”Ÿæˆå›¾ç‰‡")
    print(f"{'='*60}")
    print(f"ğŸ“ æç¤ºè¯: {PROMPT}")
    print(f"ğŸ“ å®½é«˜æ¯”: {ASPECT_RATIO}")
    print(f"ğŸ” åˆ†è¾¨ç‡: {RESOLUTION}")

    # æ„å»ºè¯·æ±‚å‚æ•°
    payload = {
        "contents": [{"parts": [{"text": PROMPT}]}],
        "generationConfig": {
            "responseModalities": ["IMAGE"],
            "imageConfig": {
                "aspectRatio": ASPECT_RATIO,
                "imageSize": RESOLUTION
            }
        }
    }

    headers = {
        "Content-Type": "application/json",
        "Authorization": f"Bearer {API_KEY}"
    }

    # å‘é€è¯·æ±‚
    print(f"\nâ³ æ­£åœ¨ç”Ÿæˆï¼Œé¢„è®¡ {TIMEOUT_MAP[RESOLUTION] // 60} åˆ†é’Ÿ...")
    start_time = time.time()

    try:
        response = requests.post(
            API_URL,
            json=payload,
            headers=headers,
            timeout=TIMEOUT_MAP[RESOLUTION]
        )

        elapsed = time.time() - start_time
        print(f"â±ï¸  å®é™…ç”¨æ—¶: {elapsed:.1f} ç§’")

        if response.status_code != 200:
            print(f"\nâŒ API é”™è¯¯ ({response.status_code}): {response.text}")
            return False

        # è§£æå“åº”
        data = response.json()
        image_base64 = data["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]

        # ä¿å­˜å›¾ç‰‡
        image_bytes = base64.b64decode(image_base64)
        with open(OUTPUT_FILE, "wb") as f:
            f.write(image_bytes)

        print(f"\nâœ… ç”ŸæˆæˆåŠŸï¼")
        print(f"ğŸ“ å·²ä¿å­˜è‡³: {OUTPUT_FILE}")
        print(f"ğŸ“¦ æ–‡ä»¶å¤§å°: {len(image_bytes) / 1024:.1f} KB")
        return True

    except requests.Timeout:
        print(f"\nâŒ è¯·æ±‚è¶…æ—¶ï¼ˆè¶…è¿‡ {TIMEOUT_MAP[RESOLUTION]} ç§’ï¼‰")
        print(f"ğŸ’¡ å»ºè®®ï¼šå°è¯•ä½¿ç”¨æ›´ä½çš„åˆ†è¾¨ç‡ï¼ˆ1K æˆ– 2Kï¼‰")
        return False
    except Exception as e:
        print(f"\nâŒ ç”Ÿæˆå¤±è´¥: {e}")
        return False

if __name__ == "__main__":
    print("\n" + "="*60)
    print("Gemini 3 Pro Image - æ–‡æœ¬ç”Ÿæˆå›¾ç‰‡ï¼ˆç®€åŒ–ç‰ˆï¼‰")
    print("="*60)

    generate_image()

    print(f"\n{'='*60}")
    print("ç¨‹åºç»“æŸ")
    print("="*60 + "\n")


```

å®Œæ•´ä»£ç ç¤ºä¾‹
------

æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¹‹ä¸€ï¼š

### æ–¹å¼ä¸€ï¼šè°·æ­ŒåŸç”Ÿæ ¼å¼ï¼ˆæ¨èï¼‰

**æ”¯æŒè‡ªå®šä¹‰åˆ†è¾¨ç‡å’Œå®½é«˜æ¯”**ï¼Œä½¿ç”¨è°·æ­Œå®˜æ–¹ API æ ¼å¼ã€‚

#### ç«¯ç‚¹

```
POST https://api.apiyi.com/v1beta/models/gemini-2.5-flash-image:generateContent


```

#### è¯·æ±‚æ ¼å¼

```
{
  "contents": [
    {
      "parts": [
        {
          "text": "å›¾ç‰‡æè¿°æç¤ºè¯"
        }
      ]
    }
  ],
  "generationConfig": {
    "responseModalities": ["IMAGE"],
    "imageConfig": {
      "aspectRatio": "16:9"
    }
  }
}


```

#### æ”¯æŒçš„å®½é«˜æ¯”

`21:9`, `16:9`, `4:3`, `3:2`, `1:1`, `9:16`, `3:4`, `2:3`, `5:4`, `4:5`

#### Python å®Œæ•´ç¤ºä¾‹

å‚è€ƒå®Œæ•´çš„ Python å®ç°ï¼š[gemini-image-generate-python.py](https://xinqikeji.feishu.cn/wiki/W4vEwdiCPi3VfTkrL5hcVlDxnQf)

```
#!/usr/bin/env python3
import requests
import base64
import os
from datetime import datetime

class GeminiImageGenerator:
    """Gemini å›¾ç‰‡ç”Ÿæˆå™¨ï¼ˆè°·æ­ŒåŸç”Ÿæ ¼å¼ï¼‰"""

    SUPPORTED_ASPECT_RATIOS = [
        "21:9", "16:9", "4:3", "3:2", "1:1",
        "9:16", "3:4", "2:3", "5:4", "4:5"
    ]

    def __init__(self, api_key: str):
        self.api_key = api_key
        self.api_url = "https://api.apiyi.com/v1beta/models/gemini-2.5-flash-image:generateContent"
        self.headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {api_key}"
        }

    def generate_image(self, prompt: str, aspect_ratio: str = "1:1", output_dir: str = "."):
        """ç”Ÿæˆå›¾ç‰‡å¹¶ä¿å­˜"""
        print(f"ğŸš€ å¼€å§‹ç”Ÿæˆå›¾ç‰‡...")
        print(f"ğŸ“ æç¤ºè¯: {prompt}")
        print(f"ğŸ“ çºµæ¨ªæ¯”: {aspect_ratio}")

        # éªŒè¯çºµæ¨ªæ¯”
        if aspect_ratio not in self.SUPPORTED_ASPECT_RATIOS:
            return False, f"ä¸æ”¯æŒçš„çºµæ¨ªæ¯” {aspect_ratio}"

        # æ„å»ºè¯·æ±‚
        payload = {
            "contents": [{
                "parts": [{"text": prompt}]
            }],
            "generationConfig": {
                "responseModalities": ["IMAGE"],
                "imageConfig": {"aspectRatio": aspect_ratio}
            }
        }

        try:
            response = requests.post(self.api_url, headers=self.headers, json=payload, timeout=120)

            if response.status_code != 200:
                return False, f"API è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : {response.status_code}"

            result = response.json()

            # æå–å›¾ç‰‡æ•°æ®
            image_data = result["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]

            # ä¿å­˜å›¾ç‰‡
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            output_file = os.path.join(output_dir, f"gemini_{timestamp}.png")

            decoded_data = base64.b64decode(image_data)
            with open(output_file, 'wb') as f:
                f.write(decoded_data)

            print(f"âœ… å›¾ç‰‡å·²ä¿å­˜: {output_file}")
            return True, f"æˆåŠŸä¿å­˜å›¾ç‰‡: {output_file}"

        except Exception as e:
            return False, f"é”™è¯¯: {str(e)}"


{/* ä½¿ç”¨ç¤ºä¾‹ */}
if __name__ == "__main__":
    API_KEY = "sk-your-api-key"
    PROMPT = "a handsome dog under the tree"
    ASPECT_RATIO = "16:9"  # å¯é€‰: 21:9, 16:9, 4:3, 3:2, 1:1, 9:16, 3:4, 2:3, 5:4, 4:5

    generator = GeminiImageGenerator(API_KEY)
    success, message = generator.generate_image(PROMPT, ASPECT_RATIO)

    if success:
        print(f"ğŸ‰ ç”ŸæˆæˆåŠŸï¼{message}")
    else:
        print(f"âŒ ç”Ÿæˆå¤±è´¥ï¼š{message}")


```

### æ–¹å¼äºŒï¼šOpenAI å…¼å®¹æ¨¡å¼

**å…¼å®¹ç°æœ‰ OpenAI æ ¼å¼ä»£ç **ï¼Œé€‚åˆå¿«é€Ÿé›†æˆã€‚é»˜è®¤ç”Ÿæˆ 1:1 æ¯”ä¾‹å›¾ç‰‡ã€‚

#### ç«¯ç‚¹

```
POST https://api.apiyi.com/v1/chat/completions


```

#### è¯·æ±‚æ ¼å¼

```
{
  "model": "gemini-2.5-flash-image",
  "stream": false,
  "messages": [
    {
      "role": "user",
      "content": "å›¾ç‰‡æè¿°æç¤ºè¯"
    }
  ]
}


```

#### Python å®Œæ•´ç¤ºä¾‹

ä»¥ä¸‹æ˜¯å®Œæ•´çš„ Python ç¤ºä¾‹ä»£ç ï¼Œæ”¯æŒè‡ªåŠ¨ä¿å­˜ base64 å›¾ç‰‡åˆ°æœ¬åœ°ï¼š

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
Gemini å›¾ç‰‡ç”Ÿæˆ - Pythonç‰ˆæœ¬
æ”¯æŒéæµå¼è¾“å‡ºå’Œè‡ªåŠ¨ä¿å­˜base64å›¾ç‰‡åˆ°æœ¬åœ°
"""

import requests
import json
import base64
import re
import os
import datetime
from typing import Optional, Tuple

class GeminiImageGenerator:
    def __init__(self, api_key: str, api_url: str = "https://api.apiyi.com/v1/chat/completions"):
        """
        åˆå§‹åŒ–Geminiå›¾ç‰‡ç”Ÿæˆå™¨
        
        Args:
            api_key: APIå¯†é’¥
            api_url: APIåœ°å€
        """
        self.api_key = api_key
        self.api_url = api_url
        self.headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {api_key}"
        }
    
    def generate_image(self, prompt: str, model: str = "gemini-2.5-flash-image",
                      output_dir: str = ".") -> Tuple[bool, str]:
        """
        ç”Ÿæˆå›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°
        
        Args:
            prompt: å›¾ç‰‡æè¿°æç¤ºè¯
            model: ä½¿ç”¨çš„æ¨¡å‹
            output_dir: è¾“å‡ºç›®å½•
            
        Returns:
            Tuple[æ˜¯å¦æˆåŠŸ, ç»“æœæ¶ˆæ¯]
        """
        print("ğŸš€ å¼€å§‹ç”Ÿæˆå›¾ç‰‡...")
        print(f"æç¤ºè¯: {prompt}")
        print(f"æ¨¡å‹: {model}")
        
        # ç”Ÿæˆæ–‡ä»¶å
        timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
        output_file = os.path.join(output_dir, f"gemini_generated_{timestamp}.png")
        
        try:
            # å‡†å¤‡è¯·æ±‚æ•°æ®
            payload = {
                "model": model,
                "stream": False,
                "messages": [
                    {
                        "role": "user",
                        "content": prompt
                    }
                ]
            }
            
            print("ğŸ“¡ å‘é€APIè¯·æ±‚...")
            
            # å‘é€éæµå¼è¯·æ±‚
            response = requests.post(
                self.api_url,
                headers=self.headers,
                json=payload,
                timeout=300
            )
            
            if response.status_code != 200:
                error_msg = f"APIè¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : {response.status_code}"
                try:
                    error_detail = response.json()
                    error_msg += f", é”™è¯¯è¯¦æƒ…: {error_detail}"
                except:
                    error_msg += f", å“åº”å†…å®¹: {response.text[:500]}"
                return False, error_msg
            
            print("âœ… APIè¯·æ±‚æˆåŠŸï¼Œæ­£åœ¨è§£æå“åº”...")
            
            # è§£æéæµå¼JSONå“åº”
            try:
                result = response.json()
                print("âœ… æˆåŠŸè§£æJSONå“åº”")
            except json.JSONDecodeError as e:
                return False, f"JSONè§£æå¤±è´¥: {str(e)}"
            
            # æå–æ¶ˆæ¯å†…å®¹
            full_content = ""
            if "choices" in result and len(result["choices"]) > 0:
                choice = result["choices"][0]
                if "message" in choice and "content" in choice["message"]:
                    full_content = choice["message"]["content"]
            
            if not full_content:
                return False, "æœªæ‰¾åˆ°æ¶ˆæ¯å†…å®¹"
            
            print(f"ğŸ“ è·å–åˆ°æ¶ˆæ¯å†…å®¹ï¼Œé•¿åº¦: {len(full_content)} å­—ç¬¦")
            print("ğŸ” æ­£åœ¨è§£æå›¾ç‰‡æ•°æ®...")
            
            # æå–å¹¶ä¿å­˜å›¾ç‰‡ï¼ˆæ”¯æŒbase64å’ŒURLä¸¤ç§æ–¹å¼ï¼‰
            success, message = self._extract_and_save_images(full_content, output_file)
            
            if success:
                return True, message
            else:
                return False, f"å›¾ç‰‡ä¿å­˜å¤±è´¥: {message}"
                
        except requests.exceptions.Timeout:
            return False, "è¯·æ±‚è¶…æ—¶ï¼ˆ300ç§’ï¼‰"
        except requests.exceptions.ConnectionError as e:
            return False, f"è¿æ¥é”™è¯¯: {str(e)}"
        except Exception as e:
            return False, f"æœªçŸ¥é”™è¯¯: {str(e)}"
    
    def _extract_and_save_images(self, content: str, base_output_file: str) -> Tuple[bool, str]:
        """
        é«˜æ•ˆæå–å¹¶ä¿å­˜base64å›¾ç‰‡æ•°æ®
        
        Args:
            content: åŒ…å«å›¾ç‰‡æ•°æ®çš„å†…å®¹
            base_output_file: åŸºç¡€è¾“å‡ºæ–‡ä»¶è·¯å¾„
            
        Returns:
            Tuple[æ˜¯å¦æˆåŠŸ, ç»“æœæ¶ˆæ¯]
        """
        try:
            print(f"ğŸ“„ å†…å®¹é¢„è§ˆï¼ˆå‰200å­—ç¬¦ï¼‰: {content[:200]}")
            
            # ä½¿ç”¨ç²¾ç¡®çš„æ­£åˆ™è¡¨è¾¾å¼ä¸€æ¬¡æ€§æå–base64å›¾ç‰‡æ•°æ®
            base64_pattern = r'data:image/([^;]+);base64,([A-Za-z0-9+/=]+)'
            match = re.search(base64_pattern, content)
            
            if not match:
                print('âš ï¸  æœªæ‰¾åˆ°base64å›¾ç‰‡æ•°æ®')
                return False, "å“åº”ä¸­æœªåŒ…å«base64å›¾ç‰‡æ•°æ®"
            
            image_format = match.group(1)  # png, jpg, etc.
            b64_data = match.group(2)
            
            print(f'ğŸ¨ å›¾åƒæ ¼å¼: {image_format}')
            print(f'ğŸ“ Base64æ•°æ®é•¿åº¦: {len(b64_data)} å­—ç¬¦')
            
            # è§£ç å¹¶ä¿å­˜å›¾ç‰‡
            image_data = base64.b64decode(b64_data)
            
            if len(image_data) < 100:
                return False, "è§£ç åçš„å›¾ç‰‡æ•°æ®å¤ªå°ï¼Œå¯èƒ½æ— æ•ˆ"
            
            # æ ¹æ®æ£€æµ‹åˆ°çš„æ ¼å¼è®¾ç½®æ–‡ä»¶æ‰©å±•å
            output_file = base_output_file.replace('.png', f'.{image_format}')
            os.makedirs(os.path.dirname(output_file) if os.path.dirname(output_file) else ".", exist_ok=True)
            
            with open(output_file, 'wb') as f:
                f.write(image_data)
            
            print(f'ğŸ–¼ï¸  å›¾ç‰‡ä¿å­˜æˆåŠŸ: {output_file}')
            print(f'ğŸ“Š æ–‡ä»¶å¤§å°: {len(image_data)} å­—èŠ‚')
            
            return True, f"å›¾ç‰‡ä¿å­˜æˆåŠŸ: {output_file}"
                
        except Exception as e:
            return False, f"å¤„ç†å›¾ç‰‡æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}"

def main():
    """
    ä¸»å‡½æ•°
    """
    # é…ç½®å‚æ•°
    API_KEY = "sk-"  # è¯·æ›¿æ¢ä¸ºä½ çš„å®é™…APIå¯†é’¥
    PROMPT = "a beautiful cat under the tree"
    
    print("="*60)
    print("Gemini å›¾ç‰‡ç”Ÿæˆå™¨ - Pythonç‰ˆæœ¬")
    print("="*60)
    print(f"å¼€å§‹æ—¶é—´: {datetime.datetime.now()}")
    
    # åˆ›å»ºç”Ÿæˆå™¨å®ä¾‹
    generator = GeminiImageGenerator(API_KEY)
    
    # ç”Ÿæˆå›¾ç‰‡
    success, message = generator.generate_image(PROMPT)
    
    print("\n" + "="*60)
    if success:
        print("ğŸ‰ æ‰§è¡ŒæˆåŠŸï¼")
        print(f"âœ… {message}")
    else:
        print("âŒ æ‰§è¡Œå¤±è´¥ï¼")
        print(f"ğŸ’¥ {message}")
    
    print(f"ç»“æŸæ—¶é—´: {datetime.datetime.now()}")
    print("="*60)

if __name__ == "__main__":
    main()


```

ä½¿ç”¨æ­¥éª¤
----

1.  **æ›¿æ¢ API Key**ï¼šå°†ä»£ç ä¸­çš„ `API_KEY` æ›¿æ¢ä¸ºä½ çš„å®é™… API å¯†é’¥
2.  **ä¿®æ”¹æç¤ºè¯**ï¼šæ ¹æ®éœ€è¦ä¿®æ”¹ `PROMPT` å˜é‡
3.  **è¿è¡Œè„šæœ¬**ï¼šæ‰§è¡Œ Python è„šæœ¬ï¼Œå›¾ç‰‡å°†è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°

ä½¿ç”¨å»ºè®®
----

### é€‰æ‹©åˆé€‚çš„è°ƒç”¨æ–¹å¼

### è¿ç§»æŒ‡å—

å¦‚æœæ‚¨å½“å‰ä½¿ç”¨é¢„è§ˆç‰ˆæ¨¡å‹æˆ–å¸Œæœ›è¿ç§»åˆ°è°·æ­ŒåŸç”Ÿæ ¼å¼ï¼Œè¯·å‚è€ƒï¼š

ä»·æ ¼å¯¹æ¯”
----

<table><thead><tr><th>æ¨¡å‹</th><th>å®šä»·</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>Nano Banana Pro</strong> (4K)</td><td>$0.050 / å¼  (å……å€¼åŠ èµ çº¦ï¿¥0.29)</td><td>ğŸ”¥ æ”¯æŒ 4K é«˜æ¸…ï¼Œå®˜ç½‘ 17% ä»·æ ¼</td></tr><tr><td><strong>Nano Banana Pro</strong> (1K-2K)</td><td>$0.050 / å¼  (å……å€¼åŠ èµ çº¦ï¿¥0.29)</td><td>ğŸ”¥ é«˜æ¸…å‡ºå›¾ï¼Œå®˜ç½‘ 30% ä»·æ ¼</td></tr><tr><td><strong>Nano Banana</strong></td><td>$0.025 / å¼  (å……å€¼åŠ èµ çº¦ï¿¥0.15)</td><td>â­ å¿«é€Ÿç”Ÿæˆï¼Œå®˜ç½‘ 52% ä»·æ ¼</td></tr><tr><td>gpt-image-1</td><td>æ›´é«˜</td><td data-numeric="true">-</td></tr><tr><td>flux-kontext-pro</td><td data-numeric="true">$0.035 / å¼ </td><td>æŒå¹³</td></tr><tr><td>sora_image</td><td>æ›´ä½</td><td>é€†å‘æ¨¡å‹ï¼Œç¨³å®šæ€§ä¸€èˆ¬</td></tr></tbody></table>

ç‰¹æ€§å¯¹æ¯”
----

### é€Ÿåº¦å¯¹æ¯”

*   **Nano Banana**ï¼šå¹³å‡ 10 ç§’
*   **OpenAI ç³»åˆ—**ï¼š15-30 ç§’
*   **å…¶ä»–æ¨¡å‹**ï¼šå› æ¨¡å‹è€Œå¼‚

### å…¼å®¹æ€§

*   âœ… å®Œå…¨å…¼å®¹ `gpt-4o-image` è°ƒç”¨æ–¹å¼
*   âœ… å®Œå…¨å…¼å®¹ `sora_image` è°ƒç”¨æ–¹å¼
*   âœ… æ”¯æŒå¯¹è¯è¡¥å…¨ç«¯ç‚¹
*   âŒ ä¸æ”¯æŒä¼ ç»Ÿå›¾åƒç”Ÿæˆç«¯ç‚¹

API é”™è¯¯å¤„ç†æŒ‡å—
----------

Nano Banana Pro å¯¹å†…å®¹å®‰å…¨æœ‰ä¸¥æ ¼æ§åˆ¶ï¼Œå¯èƒ½ä¼šåœ¨å¤šä¸ªå±‚çº§æ‹’ç»ä¸åˆè§„çš„è¯·æ±‚ã€‚äº†è§£é”™è¯¯ç±»å‹å’Œå¤„ç†æ–¹æ³•ï¼Œèƒ½å¤Ÿå¸®åŠ©æ‚¨æ›´å¥½åœ°è¯Šæ–­é—®é¢˜å¹¶æä¾›å‹å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

### æ ¸å¿ƒé”™è¯¯åˆ¤æ–­æŒ‡æ ‡

### å¸¸è§é”™è¯¯åœºæ™¯

### é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

å¸¸è§é—®é¢˜
----

ç›¸å…³æ–‡æ¡£
----

*   [è¯¦ç»†ä½¿ç”¨æŒ‡å—](https://xinqikeji.feishu.cn/wiki/W4vEwdiCPi3VfTkrL5hcVlDxnQf)
*   [å›¾åƒç”Ÿæˆå¯¹æ¯”æµ‹è¯•](https://imagen.apiyi.com/)
*   [Nano Banana å›¾ç‰‡ç¼–è¾‘](https://docs.apiyi.com/api-capabilities/nano-banana-image-edit)
*   [å…¶ä»–å›¾åƒç”Ÿæˆæ¨¡å‹](https://docs.apiyi.com/api-capabilities/gpt-image-1)
*   [API ä½¿ç”¨æ‰‹å†Œ](https://docs.apiyi.com/api-manual)