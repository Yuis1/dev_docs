# 阿里云文档爬取指导

## 问题

控制台 URL 只显示框架，实际文档在 iframe 中：

```
控制台: https://bailian.console.aliyun.com/.../doc/?type=model&url=2842586
实际:   https://help.aliyun.com/document_detail/2842586.html?mode=pure

```

## 解决方案

### 方法 1：URL 转换（最快）

提取 `url=` 参数，拼接到帮助文档 URL：

```bash
echo "https://help.aliyun.com/document_detail/2842586.html?mode=pure"

```

**通用格式**：

```
https://help.aliyun.com/document_detail/{ID}.html?mode=pure

```

### 方法 2：浏览器开发者工具

1. 打开控制台 URL
2. `F12` → **Elements** 标签
3. `Ctrl+F` 搜索 `<iframe`
4. 查看 `src` 属性

### 方法 3：curl 提取

```bash
curl -s "控制台URL" | grep -oP 'src="https://help\.aliyun\.com/[^"]+\.html[^"]*"' | sed 's/src="//;s/"$//'

```

## 转换为 Markdown

找到实际 URL 后：

```bash
npx -y bun /home/yuis/.claude/skills/baoyu-url-to-markdown/scripts/main.ts "实际文档URL"
```

## 批量爬取

使用 `batch-fetch.sh` 批量爬取多个文档：

```bash
# 编辑脚本中的 ID 列表
vi scripts/batch-fetch.sh

# 执行批量爬取
bash scripts/batch-fetch.sh
```

## 自动分类整理

爬取完成后，使用 `organize.py` 自动分类到子目录：

```bash
python3 scripts/organize.py
```

**分类规则**：
- **API** - API 调用、流式输出、多轮对话等
- **语音** - 语音识别、合成、音频处理
- **视觉** - 图片/视频理解、OCR、GUI 操作
- **文本生成** - 文本生成、LLM、Agent
- **联网搜索** - 联网搜索相关
- **多模态** - 全模态能力
- **其他** - 其他功能

## 文档清理

使用 `clean-markdown.py` 清理格式：

```bash
python3 scripts/clean-markdown.py
```

**清理内容**：
- 移除多余空行（最多保留 1 个）
- 移除行尾空格
- 优化标题和代码块格式
- 规范列表格式
